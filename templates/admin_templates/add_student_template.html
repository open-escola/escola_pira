{% extends 'admin_templates/_base.html' %}
{% block page_title %}
    Adicionar Aluno
{% endblock page_title %}
{% load static %}


{% block main_content %}

    <section class="content">
        <div class="container-fluid">
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card card-primary">
                                <div class="card-header">
                                    <h3 class="card-title">Alunos</h3>
                                </div>
                                {% url 'add_student_save' as action_path %}
                                {% include 'admin_templates/form_template.html' with messages=messages form=form action_path=action_path button_text='Adicionar Aluno' %}
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </section>

{% endblock main_content %}

{% block _scripts_custom %}
    <script>
        $(document).ready(function () {
            console.log("Aprendendo AJAX")
        })
    </script>
    <script>
        $("#id_cep").focusout(function(){
            console.log("API do CEP!")
            //Início do Comando AJAX
            $.ajax({
                //O campo URL diz o caminho de onde virá os dados
                //É importante concatenar o valor digitado no CEP
                url: 'https://viacep.com.br/ws/'+$(this).val()+'/json/',
                // https://viacep.com.br/ws/11030601/json/

                //Aqui você deve preencher o tipo de dados que será lido,
                //no caso, estamos lendo JSON.
                dataType: 'json',
                //SUCESS é referente a função que será executada caso
                //ele consiga ler a fonte de dados com sucesso.
                //O parâmetro dentro da função se refere ao nome da variável
                //que você vai dar para ler esse objeto.
                success: function(resposta){
                    //Agora basta definir os valores que você deseja preencher
                    //automaticamente nos campos acima.
                    $("#id_logradouro").val(resposta.logradouro);
                    $("#id_bairro").val(resposta.bairro);
                    $("#id_localidade").val(resposta.localidade);
                    $("#id_uf").val(resposta.uf);

                    //Vamos incluir para que o Número seja focado automaticamente
                    //melhorando a experiência do usuário
                    $("#id_numero").focus();
                }
            });
        });
    </script>
{% endblock _scripts_custom %}

